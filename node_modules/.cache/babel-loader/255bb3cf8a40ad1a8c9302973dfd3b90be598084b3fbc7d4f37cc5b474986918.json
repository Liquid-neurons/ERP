{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar PDFName_1 = tslib_1.__importDefault(require(\"../objects/PDFName\"));\nvar PDFNumber_1 = tslib_1.__importDefault(require(\"../objects/PDFNumber\"));\nvar PDFFlateStream_1 = tslib_1.__importDefault(require(\"./PDFFlateStream\"));\nvar CharCodes_1 = tslib_1.__importDefault(require(\"../syntax/CharCodes\"));\nvar utils_1 = require(\"../../utils\");\nvar PDFObjectStream = /** @class */function (_super) {\n  tslib_1.__extends(PDFObjectStream, _super);\n  function PDFObjectStream(context, objects, encode) {\n    if (encode === void 0) {\n      encode = true;\n    }\n    var _this = _super.call(this, context.obj({}), encode) || this;\n    _this.objects = objects;\n    _this.offsets = _this.computeObjectOffsets();\n    _this.offsetsString = _this.computeOffsetsString();\n    _this.dict.set(PDFName_1.default.of('Type'), PDFName_1.default.of('ObjStm'));\n    _this.dict.set(PDFName_1.default.of('N'), PDFNumber_1.default.of(_this.objects.length));\n    _this.dict.set(PDFName_1.default.of('First'), PDFNumber_1.default.of(_this.offsetsString.length));\n    return _this;\n  }\n  PDFObjectStream.prototype.getObjectsCount = function () {\n    return this.objects.length;\n  };\n  PDFObjectStream.prototype.clone = function (context) {\n    return PDFObjectStream.withContextAndObjects(context || this.dict.context, this.objects.slice(), this.encode);\n  };\n  PDFObjectStream.prototype.getContentsString = function () {\n    var value = this.offsetsString;\n    for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n      var _a = this.objects[idx],\n        object = _a[1];\n      value += object + \"\\n\";\n    }\n    return value;\n  };\n  PDFObjectStream.prototype.getUnencodedContents = function () {\n    var buffer = new Uint8Array(this.getUnencodedContentsSize());\n    var offset = utils_1.copyStringIntoBuffer(this.offsetsString, buffer, 0);\n    for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n      var _a = this.objects[idx],\n        object = _a[1];\n      offset += object.copyBytesInto(buffer, offset);\n      buffer[offset++] = CharCodes_1.default.Newline;\n    }\n    return buffer;\n  };\n  PDFObjectStream.prototype.getUnencodedContentsSize = function () {\n    return this.offsetsString.length + utils_1.last(this.offsets)[1] + utils_1.last(this.objects)[1].sizeInBytes() + 1;\n  };\n  PDFObjectStream.prototype.computeOffsetsString = function () {\n    var offsetsString = '';\n    for (var idx = 0, len = this.offsets.length; idx < len; idx++) {\n      var _a = this.offsets[idx],\n        objectNumber = _a[0],\n        offset = _a[1];\n      offsetsString += objectNumber + \" \" + offset + \" \";\n    }\n    return offsetsString;\n  };\n  PDFObjectStream.prototype.computeObjectOffsets = function () {\n    var offset = 0;\n    var offsets = new Array(this.objects.length);\n    for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n      var _a = this.objects[idx],\n        ref = _a[0],\n        object = _a[1];\n      offsets[idx] = [ref.objectNumber, offset];\n      offset += object.sizeInBytes() + 1; // '\\n'\n    }\n    return offsets;\n  };\n  PDFObjectStream.withContextAndObjects = function (context, objects, encode) {\n    if (encode === void 0) {\n      encode = true;\n    }\n    return new PDFObjectStream(context, objects, encode);\n  };\n  return PDFObjectStream;\n}(PDFFlateStream_1.default);\nexports.default = PDFObjectStream;","map":{"version":3,"names":["PDFName_1","tslib_1","__importDefault","require","PDFNumber_1","PDFFlateStream_1","CharCodes_1","utils_1","PDFObjectStream","_super","__extends","context","objects","encode","_this","call","obj","offsets","computeObjectOffsets","offsetsString","computeOffsetsString","dict","set","default","of","length","prototype","getObjectsCount","clone","withContextAndObjects","slice","getContentsString","value","idx","len","_a","object","getUnencodedContents","buffer","Uint8Array","getUnencodedContentsSize","offset","copyStringIntoBuffer","copyBytesInto","Newline","last","sizeInBytes","objectNumber","Array","ref","exports"],"sources":["/Users/casarulez/Projects/Liquid-neurons/database_forms/data_entry_forms/node_modules/pdf-lib/src/core/structures/PDFObjectStream.ts"],"sourcesContent":["import PDFName from 'src/core/objects/PDFName';\nimport PDFNumber from 'src/core/objects/PDFNumber';\nimport PDFObject from 'src/core/objects/PDFObject';\nimport PDFRef from 'src/core/objects/PDFRef';\nimport PDFContext from 'src/core/PDFContext';\nimport PDFFlateStream from 'src/core/structures/PDFFlateStream';\nimport CharCodes from 'src/core/syntax/CharCodes';\nimport { copyStringIntoBuffer, last } from 'src/utils';\n\nexport type IndirectObject = [PDFRef, PDFObject];\n\nclass PDFObjectStream extends PDFFlateStream {\n  static withContextAndObjects = (\n    context: PDFContext,\n    objects: IndirectObject[],\n    encode = true,\n  ) => new PDFObjectStream(context, objects, encode);\n\n  private readonly objects: IndirectObject[];\n  private readonly offsets: [number, number][];\n  private readonly offsetsString: string;\n\n  private constructor(\n    context: PDFContext,\n    objects: IndirectObject[],\n    encode = true,\n  ) {\n    super(context.obj({}), encode);\n\n    this.objects = objects;\n    this.offsets = this.computeObjectOffsets();\n    this.offsetsString = this.computeOffsetsString();\n\n    this.dict.set(PDFName.of('Type'), PDFName.of('ObjStm'));\n    this.dict.set(PDFName.of('N'), PDFNumber.of(this.objects.length));\n    this.dict.set(PDFName.of('First'), PDFNumber.of(this.offsetsString.length));\n  }\n\n  getObjectsCount(): number {\n    return this.objects.length;\n  }\n\n  clone(context?: PDFContext): PDFObjectStream {\n    return PDFObjectStream.withContextAndObjects(\n      context || this.dict.context,\n      this.objects.slice(),\n      this.encode,\n    );\n  }\n\n  getContentsString(): string {\n    let value = this.offsetsString;\n    for (let idx = 0, len = this.objects.length; idx < len; idx++) {\n      const [, object] = this.objects[idx];\n      value += `${object}\\n`;\n    }\n    return value;\n  }\n\n  getUnencodedContents(): Uint8Array {\n    const buffer = new Uint8Array(this.getUnencodedContentsSize());\n    let offset = copyStringIntoBuffer(this.offsetsString, buffer, 0);\n    for (let idx = 0, len = this.objects.length; idx < len; idx++) {\n      const [, object] = this.objects[idx];\n      offset += object.copyBytesInto(buffer, offset);\n      buffer[offset++] = CharCodes.Newline;\n    }\n    return buffer;\n  }\n\n  getUnencodedContentsSize(): number {\n    return (\n      this.offsetsString.length +\n      last(this.offsets)[1] +\n      last(this.objects)[1].sizeInBytes() +\n      1\n    );\n  }\n\n  private computeOffsetsString(): string {\n    let offsetsString = '';\n    for (let idx = 0, len = this.offsets.length; idx < len; idx++) {\n      const [objectNumber, offset] = this.offsets[idx];\n      offsetsString += `${objectNumber} ${offset} `;\n    }\n    return offsetsString;\n  }\n\n  private computeObjectOffsets(): [number, number][] {\n    let offset = 0;\n    const offsets = new Array(this.objects.length);\n    for (let idx = 0, len = this.objects.length; idx < len; idx++) {\n      const [ref, object] = this.objects[idx];\n      offsets[idx] = [ref.objectNumber, offset];\n      offset += object.sizeInBytes() + 1; // '\\n'\n    }\n    return offsets;\n  }\n}\n\nexport default PDFObjectStream;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}