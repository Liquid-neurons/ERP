{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar PDFPage_1 = tslib_1.__importDefault(require(\"../PDFPage\"));\nvar PDFField_1 = tslib_1.__importStar(require(\"./PDFField\"));\nvar appearances_1 = require(\"./appearances\");\nvar colors_1 = require(\"../colors\");\nvar rotations_1 = require(\"../rotations\");\nvar core_1 = require(\"../../core\");\nvar utils_1 = require(\"../../utils\");\n/**\n * Represents a radio group field of a [[PDFForm]].\n *\n * [[PDFRadioGroup]] fields are collections of radio buttons. The purpose of a\n * radio group is to enable users to select one option from a set of mutually\n * exclusive choices. Each choice in a radio group is represented by a radio\n * button. Radio buttons each have two states: `on` and `off`. At most one\n * radio button in a group may be in the `on` state at any time. Users can\n * click on a radio button to select it (and thereby automatically deselect any\n * other radio button that might have already been selected). Some radio\n * groups allow users to toggle a selected radio button `off` by clicking on\n * it (see [[PDFRadioGroup.isOffToggleable]]).\n *\n * Note that some radio groups allow multiple radio buttons to be in the `on`\n * state at the same type **if** they represent the same underlying value (see\n * [[PDFRadioGroup.isMutuallyExclusive]]).\n */\nvar PDFRadioGroup = /** @class */function (_super) {\n  tslib_1.__extends(PDFRadioGroup, _super);\n  function PDFRadioGroup(acroRadioButton, ref, doc) {\n    var _this = _super.call(this, acroRadioButton, ref, doc) || this;\n    utils_1.assertIs(acroRadioButton, 'acroRadioButton', [[core_1.PDFAcroRadioButton, 'PDFAcroRadioButton']]);\n    _this.acroField = acroRadioButton;\n    return _this;\n  }\n  /**\n   * Get the list of available options for this radio group. Each option is\n   * represented by a radio button. These radio buttons are displayed at\n   * various locations in the document, potentially on different pages (though\n   * typically they are stacked horizontally or vertically on the same page).\n   * For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * const options = radioGroup.getOptions()\n   * console.log('Radio Group options:', options)\n   * ```\n   * @returns The options for this radio group.\n   */\n  PDFRadioGroup.prototype.getOptions = function () {\n    var exportValues = this.acroField.getExportValues();\n    if (exportValues) {\n      var exportOptions = new Array(exportValues.length);\n      for (var idx = 0, len = exportValues.length; idx < len; idx++) {\n        exportOptions[idx] = exportValues[idx].decodeText();\n      }\n      return exportOptions;\n    }\n    var onValues = this.acroField.getOnValues();\n    var onOptions = new Array(onValues.length);\n    for (var idx = 0, len = onOptions.length; idx < len; idx++) {\n      onOptions[idx] = onValues[idx].decodeText();\n    }\n    return onOptions;\n  };\n  /**\n   * Get the selected option for this radio group. The selected option is\n   * represented by the radio button in this group that is turned on. At most\n   * one radio button in a group can be selected. If no buttons in this group\n   * are selected, `undefined` is returned.\n   * For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * const selected = radioGroup.getSelected()\n   * console.log('Selected radio button:', selected)\n   * ```\n   * @returns The selected option for this radio group.\n   */\n  PDFRadioGroup.prototype.getSelected = function () {\n    var value = this.acroField.getValue();\n    if (value === core_1.PDFName.of('Off')) return undefined;\n    var exportValues = this.acroField.getExportValues();\n    if (exportValues) {\n      var onValues = this.acroField.getOnValues();\n      for (var idx = 0, len = onValues.length; idx < len; idx++) {\n        if (onValues[idx] === value) return exportValues[idx].decodeText();\n      }\n    }\n    return value.decodeText();\n  };\n  // // TODO: Figure out why this seems to crash Acrobat. Maybe it's because we\n  // //       aren't removing the widget reference from the page's Annots?\n  // removeOption(option: string) {\n  //   assertIs(option, 'option', ['string']);\n  //   // TODO: Assert is valid `option`!\n  //   const onValues = this.acroField.getOnValues();\n  //   const exportValues = this.acroField.getExportValues();\n  //   if (exportValues) {\n  //     for (let idx = 0, len = exportValues.length; idx < len; idx++) {\n  //       if (exportValues[idx].decodeText() === option) {\n  //         this.acroField.removeWidget(idx);\n  //         this.acroField.removeExportValue(idx);\n  //       }\n  //     }\n  //   } else {\n  //     for (let idx = 0, len = onValues.length; idx < len; idx++) {\n  //       const value = onValues[idx];\n  //       if (value.decodeText() === option) {\n  //         this.acroField.removeWidget(idx);\n  //         this.acroField.removeExportValue(idx);\n  //       }\n  //     }\n  //   }\n  // }\n  /**\n   * Select an option for this radio group. This operation is analogous to a\n   * human user clicking one of the radio buttons in this group via a PDF\n   * reader to toggle it on. This method will update the underlying state of\n   * the radio group to indicate which option has been selected. PDF libraries\n   * and readers will be able to extract this value from the saved document and\n   * determine which option was selected.\n   *\n   * For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('best.superhero.radioGroup')\n   * radioGroup.select('One Punch Man')\n   * ```\n   *\n   * This method will mark this radio group as dirty, causing its appearance\n   * streams to be updated when either [[PDFDocument.save]] or\n   * [[PDFForm.updateFieldAppearances]] is called. The updated appearance\n   * streams will display a dot inside the widget of this check box field\n   * that represents the selected option.\n   *\n   * @param option The option to be selected.\n   */\n  PDFRadioGroup.prototype.select = function (option) {\n    utils_1.assertIs(option, 'option', ['string']);\n    var validOptions = this.getOptions();\n    utils_1.assertIsOneOf(option, 'option', validOptions);\n    this.markAsDirty();\n    var onValues = this.acroField.getOnValues();\n    var exportValues = this.acroField.getExportValues();\n    if (exportValues) {\n      for (var idx = 0, len = exportValues.length; idx < len; idx++) {\n        if (exportValues[idx].decodeText() === option) {\n          this.acroField.setValue(onValues[idx]);\n        }\n      }\n    } else {\n      for (var idx = 0, len = onValues.length; idx < len; idx++) {\n        var value = onValues[idx];\n        if (value.decodeText() === option) this.acroField.setValue(value);\n      }\n    }\n  };\n  /**\n   * Clear any selected option for this dropdown. This will result in all\n   * radio buttons in this group being toggled off. This method will update\n   * the underlying state of the dropdown to indicate that no radio buttons\n   * have been selected.\n   * For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.clear()\n   * ```\n   * This method will mark this radio group as dirty. See\n   * [[PDFRadioGroup.select]] for more details about what this means.\n   */\n  PDFRadioGroup.prototype.clear = function () {\n    this.markAsDirty();\n    this.acroField.setValue(core_1.PDFName.of('Off'));\n  };\n  /**\n   * Returns `true` if users can click on radio buttons in this group to toggle\n   * them off. The alternative is that once a user clicks on a radio button\n   * to select it, the only way to deselect it is by selecting on another radio\n   * button in the group. See [[PDFRadioGroup.enableOffToggling]] and\n   * [[PDFRadioGroup.disableOffToggling]]. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * if (radioGroup.isOffToggleable()) console.log('Off toggling is enabled')\n   * ```\n   */\n  PDFRadioGroup.prototype.isOffToggleable = function () {\n    return !this.acroField.hasFlag(core_1.AcroButtonFlags.NoToggleToOff);\n  };\n  /**\n   * Allow users to click on selected radio buttons in this group to toggle\n   * them off. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.enableOffToggling()\n   * ```\n   * > **NOTE:** This feature is documented in the PDF specification\n   * > (Table 226). However, most PDF readers do not respect this option and\n   * > prevent users from toggling radio buttons off even when it is enabled.\n   * > At the time of this writing (9/6/2020) Mac's Preview software did\n   * > respect the option. Adobe Acrobat, Foxit Reader, and Google Chrome did\n   * > not.\n   */\n  PDFRadioGroup.prototype.enableOffToggling = function () {\n    this.acroField.setFlagTo(core_1.AcroButtonFlags.NoToggleToOff, false);\n  };\n  /**\n   * Prevent users from clicking on selected radio buttons in this group to\n   * toggle them off. Clicking on a selected radio button will have no effect.\n   * The only way to deselect a selected radio button is to click on a\n   * different radio button in the group. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.disableOffToggling()\n   * ```\n   */\n  PDFRadioGroup.prototype.disableOffToggling = function () {\n    this.acroField.setFlagTo(core_1.AcroButtonFlags.NoToggleToOff, true);\n  };\n  /**\n   * Returns `true` if the radio buttons in this group are mutually exclusive.\n   * This means that when the user selects a radio button, only that specific\n   * button will be turned on. Even if other radio buttons in the group\n   * represent the same value, they will not be enabled. The alternative to\n   * this is that clicking a radio button will select that button along with\n   * any other radio buttons in the group that share the same value. See\n   * [[PDFRadioGroup.enableMutualExclusion]] and\n   * [[PDFRadioGroup.disableMutualExclusion]].\n   * For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * if (radioGroup.isMutuallyExclusive()) console.log('Mutual exclusion is enabled')\n   * ```\n   */\n  PDFRadioGroup.prototype.isMutuallyExclusive = function () {\n    return !this.acroField.hasFlag(core_1.AcroButtonFlags.RadiosInUnison);\n  };\n  /**\n   * When the user clicks a radio button in this group it will be selected. In\n   * addition, any other radio buttons in this group that share the same\n   * underlying value will also be selected. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.enableMutualExclusion()\n   * ```\n   * Note that this option must be enabled prior to adding options to the\n   * radio group. It does not currently apply retroactively to existing\n   * radio buttons in the group.\n   */\n  PDFRadioGroup.prototype.enableMutualExclusion = function () {\n    this.acroField.setFlagTo(core_1.AcroButtonFlags.RadiosInUnison, false);\n  };\n  /**\n   * When the user clicks a radio button in this group only it will be selected.\n   * No other radio buttons in the group will be selected, even if they share\n   * the same underlying value. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.disableMutualExclusion()\n   * ```\n   * Note that this option must be disabled prior to adding options to the\n   * radio group. It does not currently apply retroactively to existing\n   * radio buttons in the group.\n   */\n  PDFRadioGroup.prototype.disableMutualExclusion = function () {\n    this.acroField.setFlagTo(core_1.AcroButtonFlags.RadiosInUnison, true);\n  };\n  /**\n   * Add a new radio button to this group on the specified page. For example:\n   * ```js\n   * const page = pdfDoc.addPage()\n   *\n   * const form = pdfDoc.getForm()\n   * const radioGroup = form.createRadioGroup('best.gundam')\n   *\n   * const options = {\n   *   x: 50,\n   *   width: 25,\n   *   height: 25,\n   *   textColor: rgb(1, 0, 0),\n   *   backgroundColor: rgb(0, 1, 0),\n   *   borderColor: rgb(0, 0, 1),\n   *   borderWidth: 2,\n   *   rotate: degrees(90),\n   * }\n   *\n   * radioGroup.addOptionToPage('Exia', page, { ...options, y: 50 })\n   * radioGroup.addOptionToPage('Dynames', page, { ...options, y: 110 })\n   * ```\n   * This will create a new radio button widget for this radio group field.\n   * @param option The option that the radio button widget represents.\n   * @param page The page to which the radio button widget should be added.\n   * @param options The options to be used when adding the radio button widget.\n   */\n  PDFRadioGroup.prototype.addOptionToPage = function (option, page, options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    utils_1.assertIs(option, 'option', ['string']);\n    utils_1.assertIs(page, 'page', [[PDFPage_1.default, 'PDFPage']]);\n    PDFField_1.assertFieldAppearanceOptions(options);\n    // Create a widget for this radio button\n    var widget = this.createWidget({\n      x: (_a = options === null || options === void 0 ? void 0 : options.x) !== null && _a !== void 0 ? _a : 0,\n      y: (_b = options === null || options === void 0 ? void 0 : options.y) !== null && _b !== void 0 ? _b : 0,\n      width: (_c = options === null || options === void 0 ? void 0 : options.width) !== null && _c !== void 0 ? _c : 50,\n      height: (_d = options === null || options === void 0 ? void 0 : options.height) !== null && _d !== void 0 ? _d : 50,\n      textColor: (_e = options === null || options === void 0 ? void 0 : options.textColor) !== null && _e !== void 0 ? _e : colors_1.rgb(0, 0, 0),\n      backgroundColor: (_f = options === null || options === void 0 ? void 0 : options.backgroundColor) !== null && _f !== void 0 ? _f : colors_1.rgb(1, 1, 1),\n      borderColor: (_g = options === null || options === void 0 ? void 0 : options.borderColor) !== null && _g !== void 0 ? _g : colors_1.rgb(0, 0, 0),\n      borderWidth: (_h = options === null || options === void 0 ? void 0 : options.borderWidth) !== null && _h !== void 0 ? _h : 1,\n      rotate: (_j = options === null || options === void 0 ? void 0 : options.rotate) !== null && _j !== void 0 ? _j : rotations_1.degrees(0),\n      hidden: options === null || options === void 0 ? void 0 : options.hidden,\n      page: page.ref\n    });\n    var widgetRef = this.doc.context.register(widget.dict);\n    // Add widget to this field\n    var apStateValue = this.acroField.addWidgetWithOpt(widgetRef, core_1.PDFHexString.fromText(option), !this.isMutuallyExclusive());\n    // Set appearance streams for widget\n    widget.setAppearanceState(core_1.PDFName.of('Off'));\n    this.updateWidgetAppearance(widget, apStateValue);\n    // Add widget to the given page\n    page.node.addAnnot(widgetRef);\n  };\n  /**\n   * Returns `true` if any of this group's radio button widgets do not have an\n   * appearance stream for their current state. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * if (radioGroup.needsAppearancesUpdate()) console.log('Needs update')\n   * ```\n   * @returns Whether or not this radio group needs an appearance update.\n   */\n  PDFRadioGroup.prototype.needsAppearancesUpdate = function () {\n    var _a;\n    var widgets = this.acroField.getWidgets();\n    for (var idx = 0, len = widgets.length; idx < len; idx++) {\n      var widget = widgets[idx];\n      var state = widget.getAppearanceState();\n      var normal = (_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal;\n      if (!(normal instanceof core_1.PDFDict)) return true;\n      if (state && !normal.has(state)) return true;\n    }\n    return false;\n  };\n  /**\n   * Update the appearance streams for each of this group's radio button widgets\n   * using the default appearance provider for radio groups. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.defaultUpdateAppearances()\n   * ```\n   */\n  PDFRadioGroup.prototype.defaultUpdateAppearances = function () {\n    this.updateAppearances();\n  };\n  // rg.updateAppearances((field: any, widget: any) => {\n  //   assert(field === rg);\n  //   assert(widget instanceof PDFWidgetAnnotation);\n  //   return { on: [...rectangle, ...circle], off: [...rectangle, ...circle] };\n  // });\n  /**\n   * Update the appearance streams for each of this group's radio button widgets\n   * using the given appearance provider. If no `provider` is passed, the\n   * default appearance provider for radio groups will be used. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.updateAppearances((field, widget) => {\n   *   ...\n   *   return {\n   *     normal: { on: drawRadioButton(...), off: drawRadioButton(...) },\n   *     down: { on: drawRadioButton(...), off: drawRadioButton(...) },\n   *   }\n   * })\n   * ```\n   * @param provider Optionally, the appearance provider to be used for\n   *                 generating the contents of the appearance streams.\n   */\n  PDFRadioGroup.prototype.updateAppearances = function (provider) {\n    utils_1.assertOrUndefined(provider, 'provider', [Function]);\n    var widgets = this.acroField.getWidgets();\n    for (var idx = 0, len = widgets.length; idx < len; idx++) {\n      var widget = widgets[idx];\n      var onValue = widget.getOnValue();\n      if (!onValue) continue;\n      this.updateWidgetAppearance(widget, onValue, provider);\n    }\n  };\n  PDFRadioGroup.prototype.updateWidgetAppearance = function (widget, onValue, provider) {\n    var apProvider = provider !== null && provider !== void 0 ? provider : appearances_1.defaultRadioGroupAppearanceProvider;\n    var appearances = appearances_1.normalizeAppearance(apProvider(this, widget));\n    this.updateOnOffWidgetAppearance(widget, onValue, appearances);\n  };\n  /**\n   * > **NOTE:** You probably don't want to call this method directly. Instead,\n   * > consider using the [[PDFForm.getOptionList]] method, which will create an\n   * > instance of [[PDFOptionList]] for you.\n   *\n   * Create an instance of [[PDFOptionList]] from an existing acroRadioButton\n   * and ref\n   *\n   * @param acroRadioButton The underlying `PDFAcroRadioButton` for this\n   *                        radio group.\n   * @param ref The unique reference for this radio group.\n   * @param doc The document to which this radio group will belong.\n   */\n  PDFRadioGroup.of = function (acroRadioButton, ref, doc) {\n    return new PDFRadioGroup(acroRadioButton, ref, doc);\n  };\n  return PDFRadioGroup;\n}(PDFField_1.default);\nexports.default = PDFRadioGroup;","map":{"version":3,"names":["PDFPage_1","tslib_1","__importDefault","require","PDFField_1","__importStar","appearances_1","colors_1","rotations_1","core_1","utils_1","PDFRadioGroup","_super","__extends","acroRadioButton","ref","doc","_this","call","assertIs","PDFAcroRadioButton","acroField","prototype","getOptions","exportValues","getExportValues","exportOptions","Array","length","idx","len","decodeText","onValues","getOnValues","onOptions","getSelected","value","getValue","PDFName","of","undefined","select","option","validOptions","assertIsOneOf","markAsDirty","setValue","clear","isOffToggleable","hasFlag","AcroButtonFlags","NoToggleToOff","enableOffToggling","setFlagTo","disableOffToggling","isMutuallyExclusive","RadiosInUnison","enableMutualExclusion","disableMutualExclusion","addOptionToPage","page","options","default","assertFieldAppearanceOptions","widget","createWidget","x","_a","y","_b","width","_c","height","_d","textColor","_e","rgb","backgroundColor","_f","borderColor","_g","borderWidth","_h","rotate","_j","degrees","hidden","widgetRef","context","register","dict","apStateValue","addWidgetWithOpt","PDFHexString","fromText","setAppearanceState","updateWidgetAppearance","node","addAnnot","needsAppearancesUpdate","widgets","getWidgets","state","getAppearanceState","normal","getAppearances","PDFDict","has","defaultUpdateAppearances","updateAppearances","provider","assertOrUndefined","Function","onValue","getOnValue","apProvider","defaultRadioGroupAppearanceProvider","appearances","normalizeAppearance","updateOnOffWidgetAppearance"],"sources":["/Users/casarulez/Projects/Liquid-neurons/database_forms/data_entry_forms/node_modules/pdf-lib/src/api/form/PDFRadioGroup.ts"],"sourcesContent":["import PDFDocument from 'src/api/PDFDocument';\nimport PDFPage from 'src/api/PDFPage';\nimport PDFField, {\n  FieldAppearanceOptions,\n  assertFieldAppearanceOptions,\n} from 'src/api/form/PDFField';\nimport {\n  AppearanceProviderFor,\n  normalizeAppearance,\n  defaultRadioGroupAppearanceProvider,\n} from 'src/api/form/appearances';\nimport { rgb } from 'src/api/colors';\nimport { degrees } from 'src/api/rotations';\n\nimport {\n  PDFName,\n  PDFRef,\n  PDFHexString,\n  PDFDict,\n  PDFWidgetAnnotation,\n  PDFAcroRadioButton,\n  AcroButtonFlags,\n} from 'src/core';\nimport { assertIs, assertOrUndefined, assertIsOneOf } from 'src/utils';\n\n/**\n * Represents a radio group field of a [[PDFForm]].\n *\n * [[PDFRadioGroup]] fields are collections of radio buttons. The purpose of a\n * radio group is to enable users to select one option from a set of mutually\n * exclusive choices. Each choice in a radio group is represented by a radio\n * button. Radio buttons each have two states: `on` and `off`. At most one\n * radio button in a group may be in the `on` state at any time. Users can\n * click on a radio button to select it (and thereby automatically deselect any\n * other radio button that might have already been selected). Some radio\n * groups allow users to toggle a selected radio button `off` by clicking on\n * it (see [[PDFRadioGroup.isOffToggleable]]).\n *\n * Note that some radio groups allow multiple radio buttons to be in the `on`\n * state at the same type **if** they represent the same underlying value (see\n * [[PDFRadioGroup.isMutuallyExclusive]]).\n */\nexport default class PDFRadioGroup extends PDFField {\n  /**\n   * > **NOTE:** You probably don't want to call this method directly. Instead,\n   * > consider using the [[PDFForm.getOptionList]] method, which will create an\n   * > instance of [[PDFOptionList]] for you.\n   *\n   * Create an instance of [[PDFOptionList]] from an existing acroRadioButton\n   * and ref\n   *\n   * @param acroRadioButton The underlying `PDFAcroRadioButton` for this\n   *                        radio group.\n   * @param ref The unique reference for this radio group.\n   * @param doc The document to which this radio group will belong.\n   */\n  static of = (\n    acroRadioButton: PDFAcroRadioButton,\n    ref: PDFRef,\n    doc: PDFDocument,\n  ) => new PDFRadioGroup(acroRadioButton, ref, doc);\n\n  /** The low-level PDFAcroRadioButton wrapped by this radio group. */\n  readonly acroField: PDFAcroRadioButton;\n\n  private constructor(\n    acroRadioButton: PDFAcroRadioButton,\n    ref: PDFRef,\n    doc: PDFDocument,\n  ) {\n    super(acroRadioButton, ref, doc);\n\n    assertIs(acroRadioButton, 'acroRadioButton', [\n      [PDFAcroRadioButton, 'PDFAcroRadioButton'],\n    ]);\n\n    this.acroField = acroRadioButton;\n  }\n\n  /**\n   * Get the list of available options for this radio group. Each option is\n   * represented by a radio button. These radio buttons are displayed at\n   * various locations in the document, potentially on different pages (though\n   * typically they are stacked horizontally or vertically on the same page).\n   * For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * const options = radioGroup.getOptions()\n   * console.log('Radio Group options:', options)\n   * ```\n   * @returns The options for this radio group.\n   */\n  getOptions(): string[] {\n    const exportValues = this.acroField.getExportValues();\n    if (exportValues) {\n      const exportOptions = new Array<string>(exportValues.length);\n      for (let idx = 0, len = exportValues.length; idx < len; idx++) {\n        exportOptions[idx] = exportValues[idx].decodeText();\n      }\n      return exportOptions;\n    }\n\n    const onValues = this.acroField.getOnValues();\n    const onOptions = new Array<string>(onValues.length);\n    for (let idx = 0, len = onOptions.length; idx < len; idx++) {\n      onOptions[idx] = onValues[idx].decodeText();\n    }\n    return onOptions;\n  }\n\n  /**\n   * Get the selected option for this radio group. The selected option is\n   * represented by the radio button in this group that is turned on. At most\n   * one radio button in a group can be selected. If no buttons in this group\n   * are selected, `undefined` is returned.\n   * For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * const selected = radioGroup.getSelected()\n   * console.log('Selected radio button:', selected)\n   * ```\n   * @returns The selected option for this radio group.\n   */\n  getSelected(): string | undefined {\n    const value = this.acroField.getValue();\n    if (value === PDFName.of('Off')) return undefined;\n    const exportValues = this.acroField.getExportValues();\n    if (exportValues) {\n      const onValues = this.acroField.getOnValues();\n      for (let idx = 0, len = onValues.length; idx < len; idx++) {\n        if (onValues[idx] === value) return exportValues[idx].decodeText();\n      }\n    }\n    return value.decodeText();\n  }\n\n  // // TODO: Figure out why this seems to crash Acrobat. Maybe it's because we\n  // //       aren't removing the widget reference from the page's Annots?\n  // removeOption(option: string) {\n  //   assertIs(option, 'option', ['string']);\n  //   // TODO: Assert is valid `option`!\n\n  //   const onValues = this.acroField.getOnValues();\n  //   const exportValues = this.acroField.getExportValues();\n  //   if (exportValues) {\n  //     for (let idx = 0, len = exportValues.length; idx < len; idx++) {\n  //       if (exportValues[idx].decodeText() === option) {\n  //         this.acroField.removeWidget(idx);\n  //         this.acroField.removeExportValue(idx);\n  //       }\n  //     }\n  //   } else {\n  //     for (let idx = 0, len = onValues.length; idx < len; idx++) {\n  //       const value = onValues[idx];\n  //       if (value.decodeText() === option) {\n  //         this.acroField.removeWidget(idx);\n  //         this.acroField.removeExportValue(idx);\n  //       }\n  //     }\n  //   }\n  // }\n\n  /**\n   * Select an option for this radio group. This operation is analogous to a\n   * human user clicking one of the radio buttons in this group via a PDF\n   * reader to toggle it on. This method will update the underlying state of\n   * the radio group to indicate which option has been selected. PDF libraries\n   * and readers will be able to extract this value from the saved document and\n   * determine which option was selected.\n   *\n   * For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('best.superhero.radioGroup')\n   * radioGroup.select('One Punch Man')\n   * ```\n   *\n   * This method will mark this radio group as dirty, causing its appearance\n   * streams to be updated when either [[PDFDocument.save]] or\n   * [[PDFForm.updateFieldAppearances]] is called. The updated appearance\n   * streams will display a dot inside the widget of this check box field\n   * that represents the selected option.\n   *\n   * @param option The option to be selected.\n   */\n  select(option: string) {\n    assertIs(option, 'option', ['string']);\n\n    const validOptions = this.getOptions();\n    assertIsOneOf(option, 'option', validOptions);\n\n    this.markAsDirty();\n\n    const onValues = this.acroField.getOnValues();\n    const exportValues = this.acroField.getExportValues();\n    if (exportValues) {\n      for (let idx = 0, len = exportValues.length; idx < len; idx++) {\n        if (exportValues[idx].decodeText() === option) {\n          this.acroField.setValue(onValues[idx]);\n        }\n      }\n    } else {\n      for (let idx = 0, len = onValues.length; idx < len; idx++) {\n        const value = onValues[idx];\n        if (value.decodeText() === option) this.acroField.setValue(value);\n      }\n    }\n  }\n\n  /**\n   * Clear any selected option for this dropdown. This will result in all\n   * radio buttons in this group being toggled off. This method will update\n   * the underlying state of the dropdown to indicate that no radio buttons\n   * have been selected.\n   * For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.clear()\n   * ```\n   * This method will mark this radio group as dirty. See\n   * [[PDFRadioGroup.select]] for more details about what this means.\n   */\n  clear() {\n    this.markAsDirty();\n    this.acroField.setValue(PDFName.of('Off'));\n  }\n\n  /**\n   * Returns `true` if users can click on radio buttons in this group to toggle\n   * them off. The alternative is that once a user clicks on a radio button\n   * to select it, the only way to deselect it is by selecting on another radio\n   * button in the group. See [[PDFRadioGroup.enableOffToggling]] and\n   * [[PDFRadioGroup.disableOffToggling]]. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * if (radioGroup.isOffToggleable()) console.log('Off toggling is enabled')\n   * ```\n   */\n  isOffToggleable() {\n    return !this.acroField.hasFlag(AcroButtonFlags.NoToggleToOff);\n  }\n\n  /**\n   * Allow users to click on selected radio buttons in this group to toggle\n   * them off. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.enableOffToggling()\n   * ```\n   * > **NOTE:** This feature is documented in the PDF specification\n   * > (Table 226). However, most PDF readers do not respect this option and\n   * > prevent users from toggling radio buttons off even when it is enabled.\n   * > At the time of this writing (9/6/2020) Mac's Preview software did\n   * > respect the option. Adobe Acrobat, Foxit Reader, and Google Chrome did\n   * > not.\n   */\n  enableOffToggling() {\n    this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff, false);\n  }\n\n  /**\n   * Prevent users from clicking on selected radio buttons in this group to\n   * toggle them off. Clicking on a selected radio button will have no effect.\n   * The only way to deselect a selected radio button is to click on a\n   * different radio button in the group. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.disableOffToggling()\n   * ```\n   */\n  disableOffToggling() {\n    this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff, true);\n  }\n\n  /**\n   * Returns `true` if the radio buttons in this group are mutually exclusive.\n   * This means that when the user selects a radio button, only that specific\n   * button will be turned on. Even if other radio buttons in the group\n   * represent the same value, they will not be enabled. The alternative to\n   * this is that clicking a radio button will select that button along with\n   * any other radio buttons in the group that share the same value. See\n   * [[PDFRadioGroup.enableMutualExclusion]] and\n   * [[PDFRadioGroup.disableMutualExclusion]].\n   * For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * if (radioGroup.isMutuallyExclusive()) console.log('Mutual exclusion is enabled')\n   * ```\n   */\n  isMutuallyExclusive() {\n    return !this.acroField.hasFlag(AcroButtonFlags.RadiosInUnison);\n  }\n\n  /**\n   * When the user clicks a radio button in this group it will be selected. In\n   * addition, any other radio buttons in this group that share the same\n   * underlying value will also be selected. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.enableMutualExclusion()\n   * ```\n   * Note that this option must be enabled prior to adding options to the\n   * radio group. It does not currently apply retroactively to existing\n   * radio buttons in the group.\n   */\n  enableMutualExclusion() {\n    this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison, false);\n  }\n\n  /**\n   * When the user clicks a radio button in this group only it will be selected.\n   * No other radio buttons in the group will be selected, even if they share\n   * the same underlying value. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.disableMutualExclusion()\n   * ```\n   * Note that this option must be disabled prior to adding options to the\n   * radio group. It does not currently apply retroactively to existing\n   * radio buttons in the group.\n   */\n  disableMutualExclusion() {\n    this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison, true);\n  }\n\n  /**\n   * Add a new radio button to this group on the specified page. For example:\n   * ```js\n   * const page = pdfDoc.addPage()\n   *\n   * const form = pdfDoc.getForm()\n   * const radioGroup = form.createRadioGroup('best.gundam')\n   *\n   * const options = {\n   *   x: 50,\n   *   width: 25,\n   *   height: 25,\n   *   textColor: rgb(1, 0, 0),\n   *   backgroundColor: rgb(0, 1, 0),\n   *   borderColor: rgb(0, 0, 1),\n   *   borderWidth: 2,\n   *   rotate: degrees(90),\n   * }\n   *\n   * radioGroup.addOptionToPage('Exia', page, { ...options, y: 50 })\n   * radioGroup.addOptionToPage('Dynames', page, { ...options, y: 110 })\n   * ```\n   * This will create a new radio button widget for this radio group field.\n   * @param option The option that the radio button widget represents.\n   * @param page The page to which the radio button widget should be added.\n   * @param options The options to be used when adding the radio button widget.\n   */\n  addOptionToPage(\n    option: string,\n    page: PDFPage,\n    options?: FieldAppearanceOptions,\n  ) {\n    assertIs(option, 'option', ['string']);\n    assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n    assertFieldAppearanceOptions(options);\n\n    // Create a widget for this radio button\n    const widget = this.createWidget({\n      x: options?.x ?? 0,\n      y: options?.y ?? 0,\n      width: options?.width ?? 50,\n      height: options?.height ?? 50,\n      textColor: options?.textColor ?? rgb(0, 0, 0),\n      backgroundColor: options?.backgroundColor ?? rgb(1, 1, 1),\n      borderColor: options?.borderColor ?? rgb(0, 0, 0),\n      borderWidth: options?.borderWidth ?? 1,\n      rotate: options?.rotate ?? degrees(0),\n      hidden: options?.hidden,\n      page: page.ref,\n    });\n    const widgetRef = this.doc.context.register(widget.dict);\n\n    // Add widget to this field\n    const apStateValue = this.acroField.addWidgetWithOpt(\n      widgetRef,\n      PDFHexString.fromText(option),\n      !this.isMutuallyExclusive(),\n    );\n\n    // Set appearance streams for widget\n    widget.setAppearanceState(PDFName.of('Off'));\n    this.updateWidgetAppearance(widget, apStateValue);\n\n    // Add widget to the given page\n    page.node.addAnnot(widgetRef);\n  }\n\n  /**\n   * Returns `true` if any of this group's radio button widgets do not have an\n   * appearance stream for their current state. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * if (radioGroup.needsAppearancesUpdate()) console.log('Needs update')\n   * ```\n   * @returns Whether or not this radio group needs an appearance update.\n   */\n  needsAppearancesUpdate(): boolean {\n    const widgets = this.acroField.getWidgets();\n    for (let idx = 0, len = widgets.length; idx < len; idx++) {\n      const widget = widgets[idx];\n      const state = widget.getAppearanceState();\n      const normal = widget.getAppearances()?.normal;\n\n      if (!(normal instanceof PDFDict)) return true;\n      if (state && !normal.has(state)) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Update the appearance streams for each of this group's radio button widgets\n   * using the default appearance provider for radio groups. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.defaultUpdateAppearances()\n   * ```\n   */\n  defaultUpdateAppearances() {\n    this.updateAppearances();\n  }\n\n  // rg.updateAppearances((field: any, widget: any) => {\n  //   assert(field === rg);\n  //   assert(widget instanceof PDFWidgetAnnotation);\n  //   return { on: [...rectangle, ...circle], off: [...rectangle, ...circle] };\n  // });\n\n  /**\n   * Update the appearance streams for each of this group's radio button widgets\n   * using the given appearance provider. If no `provider` is passed, the\n   * default appearance provider for radio groups will be used. For example:\n   * ```js\n   * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n   * radioGroup.updateAppearances((field, widget) => {\n   *   ...\n   *   return {\n   *     normal: { on: drawRadioButton(...), off: drawRadioButton(...) },\n   *     down: { on: drawRadioButton(...), off: drawRadioButton(...) },\n   *   }\n   * })\n   * ```\n   * @param provider Optionally, the appearance provider to be used for\n   *                 generating the contents of the appearance streams.\n   */\n  updateAppearances(provider?: AppearanceProviderFor<PDFRadioGroup>) {\n    assertOrUndefined(provider, 'provider', [Function]);\n\n    const widgets = this.acroField.getWidgets();\n    for (let idx = 0, len = widgets.length; idx < len; idx++) {\n      const widget = widgets[idx];\n      const onValue = widget.getOnValue();\n      if (!onValue) continue;\n      this.updateWidgetAppearance(widget, onValue, provider);\n    }\n  }\n\n  private updateWidgetAppearance(\n    widget: PDFWidgetAnnotation,\n    onValue: PDFName,\n    provider?: AppearanceProviderFor<PDFRadioGroup>,\n  ) {\n    const apProvider = provider ?? defaultRadioGroupAppearanceProvider;\n    const appearances = normalizeAppearance(apProvider(this, widget));\n    this.updateOnOffWidgetAppearance(widget, onValue, appearances);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}