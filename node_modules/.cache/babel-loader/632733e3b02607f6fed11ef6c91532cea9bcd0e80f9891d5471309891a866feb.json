{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar PDFObject_1 = tslib_1.__importDefault(require(\"./PDFObject\"));\nvar CharCodes_1 = tslib_1.__importDefault(require(\"../syntax/CharCodes\"));\nvar utils_1 = require(\"../../utils\");\nvar errors_1 = require(\"../errors\");\nvar PDFString = /** @class */function (_super) {\n  tslib_1.__extends(PDFString, _super);\n  function PDFString(value) {\n    var _this = _super.call(this) || this;\n    _this.value = value;\n    return _this;\n  }\n  PDFString.prototype.asBytes = function () {\n    var bytes = [];\n    var octal = '';\n    var escaped = false;\n    var pushByte = function (byte) {\n      if (byte !== undefined) bytes.push(byte);\n      escaped = false;\n    };\n    for (var idx = 0, len = this.value.length; idx < len; idx++) {\n      var char = this.value[idx];\n      var byte = utils_1.toCharCode(char);\n      var nextChar = this.value[idx + 1];\n      if (!escaped) {\n        if (byte === CharCodes_1.default.BackSlash) escaped = true;else pushByte(byte);\n      } else {\n        if (byte === CharCodes_1.default.Newline) pushByte();else if (byte === CharCodes_1.default.CarriageReturn) pushByte();else if (byte === CharCodes_1.default.n) pushByte(CharCodes_1.default.Newline);else if (byte === CharCodes_1.default.r) pushByte(CharCodes_1.default.CarriageReturn);else if (byte === CharCodes_1.default.t) pushByte(CharCodes_1.default.Tab);else if (byte === CharCodes_1.default.b) pushByte(CharCodes_1.default.Backspace);else if (byte === CharCodes_1.default.f) pushByte(CharCodes_1.default.FormFeed);else if (byte === CharCodes_1.default.LeftParen) pushByte(CharCodes_1.default.LeftParen);else if (byte === CharCodes_1.default.RightParen) pushByte(CharCodes_1.default.RightParen);else if (byte === CharCodes_1.default.Backspace) pushByte(CharCodes_1.default.BackSlash);else if (byte >= CharCodes_1.default.Zero && byte <= CharCodes_1.default.Seven) {\n          octal += char;\n          if (octal.length === 3 || !(nextChar >= '0' && nextChar <= '7')) {\n            pushByte(parseInt(octal, 8));\n            octal = '';\n          }\n        } else {\n          pushByte(byte);\n        }\n      }\n    }\n    return new Uint8Array(bytes);\n  };\n  PDFString.prototype.decodeText = function () {\n    var bytes = this.asBytes();\n    if (utils_1.hasUtf16BOM(bytes)) return utils_1.utf16Decode(bytes);\n    return utils_1.pdfDocEncodingDecode(bytes);\n  };\n  PDFString.prototype.decodeDate = function () {\n    var text = this.decodeText();\n    var date = utils_1.parseDate(text);\n    if (!date) throw new errors_1.InvalidPDFDateStringError(text);\n    return date;\n  };\n  PDFString.prototype.asString = function () {\n    return this.value;\n  };\n  PDFString.prototype.clone = function () {\n    return PDFString.of(this.value);\n  };\n  PDFString.prototype.toString = function () {\n    return \"(\" + this.value + \")\";\n  };\n  PDFString.prototype.sizeInBytes = function () {\n    return this.value.length + 2;\n  };\n  PDFString.prototype.copyBytesInto = function (buffer, offset) {\n    buffer[offset++] = CharCodes_1.default.LeftParen;\n    offset += utils_1.copyStringIntoBuffer(this.value, buffer, offset);\n    buffer[offset++] = CharCodes_1.default.RightParen;\n    return this.value.length + 2;\n  };\n  // The PDF spec allows newlines and parens to appear directly within a literal\n  // string. These character _may_ be escaped. But they do not _have_ to be. So\n  // for simplicity, we will not bother escaping them.\n  PDFString.of = function (value) {\n    return new PDFString(value);\n  };\n  PDFString.fromDate = function (date) {\n    var year = utils_1.padStart(String(date.getUTCFullYear()), 4, '0');\n    var month = utils_1.padStart(String(date.getUTCMonth() + 1), 2, '0');\n    var day = utils_1.padStart(String(date.getUTCDate()), 2, '0');\n    var hours = utils_1.padStart(String(date.getUTCHours()), 2, '0');\n    var mins = utils_1.padStart(String(date.getUTCMinutes()), 2, '0');\n    var secs = utils_1.padStart(String(date.getUTCSeconds()), 2, '0');\n    return new PDFString(\"D:\" + year + month + day + hours + mins + secs + \"Z\");\n  };\n  return PDFString;\n}(PDFObject_1.default);\nexports.default = PDFString;","map":{"version":3,"names":["PDFObject_1","tslib_1","__importDefault","require","CharCodes_1","utils_1","errors_1","PDFString","_super","__extends","value","_this","call","prototype","asBytes","bytes","octal","escaped","pushByte","byte","undefined","push","idx","len","length","char","toCharCode","nextChar","default","BackSlash","Newline","CarriageReturn","n","r","t","Tab","b","Backspace","f","FormFeed","LeftParen","RightParen","Zero","Seven","parseInt","Uint8Array","decodeText","hasUtf16BOM","utf16Decode","pdfDocEncodingDecode","decodeDate","text","date","parseDate","InvalidPDFDateStringError","asString","clone","of","toString","sizeInBytes","copyBytesInto","buffer","offset","copyStringIntoBuffer","fromDate","year","padStart","String","getUTCFullYear","month","getUTCMonth","day","getUTCDate","hours","getUTCHours","mins","getUTCMinutes","secs","getUTCSeconds","exports"],"sources":["/Users/casarulez/Projects/Liquid-neurons/database_forms/data_entry_forms/node_modules/pdf-lib/src/core/objects/PDFString.ts"],"sourcesContent":["import PDFObject from 'src/core/objects/PDFObject';\nimport CharCodes from 'src/core/syntax/CharCodes';\nimport {\n  copyStringIntoBuffer,\n  padStart,\n  utf16Decode,\n  pdfDocEncodingDecode,\n  toCharCode,\n  parseDate,\n  hasUtf16BOM,\n} from 'src/utils';\nimport { InvalidPDFDateStringError } from 'src/core/errors';\n\nclass PDFString extends PDFObject {\n  // The PDF spec allows newlines and parens to appear directly within a literal\n  // string. These character _may_ be escaped. But they do not _have_ to be. So\n  // for simplicity, we will not bother escaping them.\n  static of = (value: string) => new PDFString(value);\n\n  static fromDate = (date: Date) => {\n    const year = padStart(String(date.getUTCFullYear()), 4, '0');\n    const month = padStart(String(date.getUTCMonth() + 1), 2, '0');\n    const day = padStart(String(date.getUTCDate()), 2, '0');\n    const hours = padStart(String(date.getUTCHours()), 2, '0');\n    const mins = padStart(String(date.getUTCMinutes()), 2, '0');\n    const secs = padStart(String(date.getUTCSeconds()), 2, '0');\n    return new PDFString(`D:${year}${month}${day}${hours}${mins}${secs}Z`);\n  };\n\n  private readonly value: string;\n\n  private constructor(value: string) {\n    super();\n    this.value = value;\n  }\n\n  asBytes(): Uint8Array {\n    const bytes: number[] = [];\n\n    let octal = '';\n    let escaped = false;\n\n    const pushByte = (byte?: number) => {\n      if (byte !== undefined) bytes.push(byte);\n      escaped = false;\n    };\n\n    for (let idx = 0, len = this.value.length; idx < len; idx++) {\n      const char = this.value[idx];\n      const byte = toCharCode(char);\n      const nextChar = this.value[idx + 1];\n      if (!escaped) {\n        if (byte === CharCodes.BackSlash) escaped = true;\n        else pushByte(byte);\n      } else {\n        if (byte === CharCodes.Newline) pushByte();\n        else if (byte === CharCodes.CarriageReturn) pushByte();\n        else if (byte === CharCodes.n) pushByte(CharCodes.Newline);\n        else if (byte === CharCodes.r) pushByte(CharCodes.CarriageReturn);\n        else if (byte === CharCodes.t) pushByte(CharCodes.Tab);\n        else if (byte === CharCodes.b) pushByte(CharCodes.Backspace);\n        else if (byte === CharCodes.f) pushByte(CharCodes.FormFeed);\n        else if (byte === CharCodes.LeftParen) pushByte(CharCodes.LeftParen);\n        else if (byte === CharCodes.RightParen) pushByte(CharCodes.RightParen);\n        else if (byte === CharCodes.Backspace) pushByte(CharCodes.BackSlash);\n        else if (byte >= CharCodes.Zero && byte <= CharCodes.Seven) {\n          octal += char;\n          if (octal.length === 3 || !(nextChar >= '0' && nextChar <= '7')) {\n            pushByte(parseInt(octal, 8));\n            octal = '';\n          }\n        } else {\n          pushByte(byte);\n        }\n      }\n    }\n\n    return new Uint8Array(bytes);\n  }\n\n  decodeText(): string {\n    const bytes = this.asBytes();\n    if (hasUtf16BOM(bytes)) return utf16Decode(bytes);\n    return pdfDocEncodingDecode(bytes);\n  }\n\n  decodeDate(): Date {\n    const text = this.decodeText();\n    const date = parseDate(text);\n    if (!date) throw new InvalidPDFDateStringError(text);\n    return date;\n  }\n\n  asString(): string {\n    return this.value;\n  }\n\n  clone(): PDFString {\n    return PDFString.of(this.value);\n  }\n\n  toString(): string {\n    return `(${this.value})`;\n  }\n\n  sizeInBytes(): number {\n    return this.value.length + 2;\n  }\n\n  copyBytesInto(buffer: Uint8Array, offset: number): number {\n    buffer[offset++] = CharCodes.LeftParen;\n    offset += copyStringIntoBuffer(this.value, buffer, offset);\n    buffer[offset++] = CharCodes.RightParen;\n    return this.value.length + 2;\n  }\n}\n\nexport default PDFString;\n"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA,CAAAC,eAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAH,OAAA,CAAAC,eAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AASA,IAAAG,QAAA,GAAAH,OAAA;AAEA,IAAAI,SAAA,0BAAAC,MAAA;EAAwBP,OAAA,CAAAQ,SAAA,CAAAF,SAAA,EAAAC,MAAA;EAkBtB,SAAAD,UAAoBG,KAAa;IAAjC,IAAAC,KAAA,GACEH,MAAA,CAAAI,IAAA,MAAO;IACPD,KAAI,CAACD,KAAK,GAAGA,KAAK;;EACpB;EAEAH,SAAA,CAAAM,SAAA,CAAAC,OAAO,GAAP;IACE,IAAMC,KAAK,GAAa,EAAE;IAE1B,IAAIC,KAAK,GAAG,EAAE;IACd,IAAIC,OAAO,GAAG,KAAK;IAEnB,IAAMC,QAAQ,GAAG,SAAAA,CAACC,IAAa;MAC7B,IAAIA,IAAI,KAAKC,SAAS,EAAEL,KAAK,CAACM,IAAI,CAACF,IAAI,CAAC;MACxCF,OAAO,GAAG,KAAK;IACjB,CAAC;IAED,KAAK,IAAIK,GAAG,GAAG,CAAC,EAAEC,GAAG,GAAG,IAAI,CAACb,KAAK,CAACc,MAAM,EAAEF,GAAG,GAAGC,GAAG,EAAED,GAAG,EAAE,EAAE;MAC3D,IAAMG,IAAI,GAAG,IAAI,CAACf,KAAK,CAACY,GAAG,CAAC;MAC5B,IAAMH,IAAI,GAAGd,OAAA,CAAAqB,UAAU,CAACD,IAAI,CAAC;MAC7B,IAAME,QAAQ,GAAG,IAAI,CAACjB,KAAK,CAACY,GAAG,GAAG,CAAC,CAAC;MACpC,IAAI,CAACL,OAAO,EAAE;QACZ,IAAIE,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACC,SAAS,EAAEZ,OAAO,GAAG,IAAI,CAAC,KAC5CC,QAAQ,CAACC,IAAI,CAAC;OACpB,MAAM;QACL,IAAIA,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACE,OAAO,EAAEZ,QAAQ,EAAE,CAAC,KACtC,IAAIC,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACG,cAAc,EAAEb,QAAQ,EAAE,CAAC,KAClD,IAAIC,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACI,CAAC,EAAEd,QAAQ,CAACd,WAAA,CAAAwB,OAAS,CAACE,OAAO,CAAC,CAAC,KACtD,IAAIX,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACK,CAAC,EAAEf,QAAQ,CAACd,WAAA,CAAAwB,OAAS,CAACG,cAAc,CAAC,CAAC,KAC7D,IAAIZ,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACM,CAAC,EAAEhB,QAAQ,CAACd,WAAA,CAAAwB,OAAS,CAACO,GAAG,CAAC,CAAC,KAClD,IAAIhB,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACQ,CAAC,EAAElB,QAAQ,CAACd,WAAA,CAAAwB,OAAS,CAACS,SAAS,CAAC,CAAC,KACxD,IAAIlB,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACU,CAAC,EAAEpB,QAAQ,CAACd,WAAA,CAAAwB,OAAS,CAACW,QAAQ,CAAC,CAAC,KACvD,IAAIpB,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACY,SAAS,EAAEtB,QAAQ,CAACd,WAAA,CAAAwB,OAAS,CAACY,SAAS,CAAC,CAAC,KAChE,IAAIrB,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACa,UAAU,EAAEvB,QAAQ,CAACd,WAAA,CAAAwB,OAAS,CAACa,UAAU,CAAC,CAAC,KAClE,IAAItB,IAAI,KAAKf,WAAA,CAAAwB,OAAS,CAACS,SAAS,EAAEnB,QAAQ,CAACd,WAAA,CAAAwB,OAAS,CAACC,SAAS,CAAC,CAAC,KAChE,IAAIV,IAAI,IAAIf,WAAA,CAAAwB,OAAS,CAACc,IAAI,IAAIvB,IAAI,IAAIf,WAAA,CAAAwB,OAAS,CAACe,KAAK,EAAE;UAC1D3B,KAAK,IAAIS,IAAI;UACb,IAAIT,KAAK,CAACQ,MAAM,KAAK,CAAC,IAAI,EAAEG,QAAQ,IAAI,GAAG,IAAIA,QAAQ,IAAI,GAAG,CAAC,EAAE;YAC/DT,QAAQ,CAAC0B,QAAQ,CAAC5B,KAAK,EAAE,CAAC,CAAC,CAAC;YAC5BA,KAAK,GAAG,EAAE;;SAEb,MAAM;UACLE,QAAQ,CAACC,IAAI,CAAC;;;;IAKpB,OAAO,IAAI0B,UAAU,CAAC9B,KAAK,CAAC;EAC9B,CAAC;EAEDR,SAAA,CAAAM,SAAA,CAAAiC,UAAU,GAAV;IACE,IAAM/B,KAAK,GAAG,IAAI,CAACD,OAAO,EAAE;IAC5B,IAAIT,OAAA,CAAA0C,WAAW,CAAChC,KAAK,CAAC,EAAE,OAAOV,OAAA,CAAA2C,WAAW,CAACjC,KAAK,CAAC;IACjD,OAAOV,OAAA,CAAA4C,oBAAoB,CAAClC,KAAK,CAAC;EACpC,CAAC;EAEDR,SAAA,CAAAM,SAAA,CAAAqC,UAAU,GAAV;IACE,IAAMC,IAAI,GAAG,IAAI,CAACL,UAAU,EAAE;IAC9B,IAAMM,IAAI,GAAG/C,OAAA,CAAAgD,SAAS,CAACF,IAAI,CAAC;IAC5B,IAAI,CAACC,IAAI,EAAE,MAAM,IAAI9C,QAAA,CAAAgD,yBAAyB,CAACH,IAAI,CAAC;IACpD,OAAOC,IAAI;EACb,CAAC;EAED7C,SAAA,CAAAM,SAAA,CAAA0C,QAAQ,GAAR;IACE,OAAO,IAAI,CAAC7C,KAAK;EACnB,CAAC;EAEDH,SAAA,CAAAM,SAAA,CAAA2C,KAAK,GAAL;IACE,OAAOjD,SAAS,CAACkD,EAAE,CAAC,IAAI,CAAC/C,KAAK,CAAC;EACjC,CAAC;EAEDH,SAAA,CAAAM,SAAA,CAAA6C,QAAQ,GAAR;IACE,OAAO,MAAI,IAAI,CAAChD,KAAK,MAAG;EAC1B,CAAC;EAEDH,SAAA,CAAAM,SAAA,CAAA8C,WAAW,GAAX;IACE,OAAO,IAAI,CAACjD,KAAK,CAACc,MAAM,GAAG,CAAC;EAC9B,CAAC;EAEDjB,SAAA,CAAAM,SAAA,CAAA+C,aAAa,GAAb,UAAcC,MAAkB,EAAEC,MAAc;IAC9CD,MAAM,CAACC,MAAM,EAAE,CAAC,GAAG1D,WAAA,CAAAwB,OAAS,CAACY,SAAS;IACtCsB,MAAM,IAAIzD,OAAA,CAAA0D,oBAAoB,CAAC,IAAI,CAACrD,KAAK,EAAEmD,MAAM,EAAEC,MAAM,CAAC;IAC1DD,MAAM,CAACC,MAAM,EAAE,CAAC,GAAG1D,WAAA,CAAAwB,OAAS,CAACa,UAAU;IACvC,OAAO,IAAI,CAAC/B,KAAK,CAACc,MAAM,GAAG,CAAC;EAC9B,CAAC;EApGD;EACA;EACA;EACOjB,SAAA,CAAAkD,EAAE,GAAG,UAAC/C,KAAa;IAAK,WAAIH,SAAS,CAACG,KAAK,CAAC;EAApB,CAAoB;EAE5CH,SAAA,CAAAyD,QAAQ,GAAG,UAACZ,IAAU;IAC3B,IAAMa,IAAI,GAAG5D,OAAA,CAAA6D,QAAQ,CAACC,MAAM,CAACf,IAAI,CAACgB,cAAc,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC;IAC5D,IAAMC,KAAK,GAAGhE,OAAA,CAAA6D,QAAQ,CAACC,MAAM,CAACf,IAAI,CAACkB,WAAW,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC;IAC9D,IAAMC,GAAG,GAAGlE,OAAA,CAAA6D,QAAQ,CAACC,MAAM,CAACf,IAAI,CAACoB,UAAU,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC;IACvD,IAAMC,KAAK,GAAGpE,OAAA,CAAA6D,QAAQ,CAACC,MAAM,CAACf,IAAI,CAACsB,WAAW,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC;IAC1D,IAAMC,IAAI,GAAGtE,OAAA,CAAA6D,QAAQ,CAACC,MAAM,CAACf,IAAI,CAACwB,aAAa,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC;IAC3D,IAAMC,IAAI,GAAGxE,OAAA,CAAA6D,QAAQ,CAACC,MAAM,CAACf,IAAI,CAAC0B,aAAa,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC;IAC3D,OAAO,IAAIvE,SAAS,CAAC,OAAK0D,IAAI,GAAGI,KAAK,GAAGE,GAAG,GAAGE,KAAK,GAAGE,IAAI,GAAGE,IAAI,MAAG,CAAC;EACxE,CAAC;EAwFH,OAAAtE,SAAC;CAAA,CAtGuBP,WAAA,CAAA4B,OAAS;AAwGjCmD,OAAA,CAAAnD,OAAA,GAAerB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}